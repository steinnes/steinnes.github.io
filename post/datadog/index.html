<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
    <head>
        
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />

        <title>Monitoring at QuizUp: Datadog &middot; steinn.org</title>
        <link rel='stylesheet' href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,600' type='text/css'>
        <link rel="stylesheet" href="http://steinn.org/libraries/normalize.3.0.1.css" />
        <link rel="stylesheet" href="http://steinn.org/css/lakkris.min.css" />
        <link rel="shortcut icon" href="/favicon.ico" />
        <link rel="apple-touch-icon-precomposed" href="/apple-touch-icon-144-precomposed.png" sizes="144x144" />
        <link rel="alternate" href="" type="application/rss+xml" title="steinn.org" />
    </head>
    <body class="li-body">

<header class="li-page-header">
    <div class="container">
        <div class="row">
            <div class="twelve columns">
                <div class="li-brand li-left">
                <a href="http://steinn.org">steinn.org</a></div>
                <div class="li-menu li-right">
                    <span class="li-menu-icon" onclick="javascript:toggle('menu');">&#9776;</span>
                    <ul id="menu2" class="li-menu-items">
                        
                            <li><a href="/about/"> about </a></li>
                        
                    </ul>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="twelve columns">
                <ul id="menu" class="li-menu-items li-menu-mobile">
                    
                        <li><a href="/about/"> about </a></li>
                    
                </ul>
            </div>
        </div>
    </div>
</header>






    <div class="container">
        <div class="row">
            <div class="twelve columns">
                <article class="li-article">
                    <header class="li-article-header">
                        
			    <time class="li-article-date">Thursday, April 16, 2015</time>
                        
                        <h1 class="li-article-title">Monitoring at QuizUp: Datadog</h1>
                        <span class="li-article-taxonomies">
                            

                            
                        </span>
                        
                    </header>
                    <section>
                        <p>One of the services we use a lot for monitoring at QuizUp is Datadog.</p>

<p>We use several software-as-a-service&rsquo;s, but this one is one of my absolute
favorites.  Datadog is an aggregator for StatsD metrics, and StatSD is
as <a href="/post/reinventing-the-wheel/">I have mentioned before</a>, one
of my favorite technologies.  The way we use Datadog is both through their
large set of excellent <a href="https://www.datadoghq.com/integrations/">
integrations</a>, which retrieve a host of standard metrics from every
third party service in our stack, but also monitor all of our hosts for
standard operating system metrics like load average, disk usage, memory
usage broken down by application, cpu load, etc; and we&rsquo;ve written our
<a href="https://gist.github.com/steinnes/04d016d19def45f85a18">custom
integrations</a> if one did not exist before.</p>

<p>Additionally we instrument our applications with statsd calls which feed
important higher level metrics into datadog where all of these can be
combined in powerful dashboards and used by metric alerts to trigger
e-mails, pings to Slack or PagerDuty, etc.  These metric alerts are our
first line of defence, allowing us to detect and fix problems before they
affect users, so effectively they keep our uptime good.  Whether it&rsquo;s
a sudden increase in the number of API non-2xx, increased latencies, disks
filling up, elevated service health transitions, cluster size changes,
no matter; it&rsquo;s all fed into Datadog and we&rsquo;re alerted from there.  This
is the kind of service, which if it proved flaky, I would get very
frustrated very quickly.  It&rsquo;s never been flaky.  No pressure ;-)</p>

<p>The purpose of this post is however to point out a fantastic recent
feature which I learned about this week, and might just change the way
we work when examining incidents.  Until now I&rsquo;ve been heavily utilizing
the Screenshot+Dropbox+Copybuffer integration offered by Dropbox, to basically
screengrab a portion of a graph or a dashboard, then paste the link to the
relevant Slack channel and ping people who I believe should investigate.</p>

<p>But there&rsquo;s an easier way to do this, <a href="https://www.datadoghq.com/2015/03/real-time-graph-annotations/">
click the snapshot icon</a> and tag the corresponding people, or use a hashtag
to add custom tags which can be used with event timeline searches.  Also if you
have Slack integrated, you can tag the relevant Slack channels directly from
the comment. This way the discussion of any issue can happen in context, and
the comments and thoughts of the engineers working on the issue will be seen
by anyone viewing that particular graph, at that time, later.</p>

<p>
<figure >
    
        <img src="http://static.steinn.org/blog/post/datadog-annotate.png" />
    
    
    <figcaption>
        <h4>Commenting on an anomaly</h4>
        
    </figcaption>
    
</figure>
</p>

<p>This week I had the pleasure of meeting Alexis (<a
href="http://twitter.com/alq">@alq</a>) from Datadog again, and he showed
me this feature amongst others, and also signed me up for notifications when
they start beta testing new features.</p>

<p>If you&rsquo;re running an app and would like to give Datadog a try, but feel the
per-host fee is expensive, it&rsquo;s possible to setup a single datadog statsd
collection node and make your other nodes send their metrics to that node.
This would not get you their nice host-level monitoring, but it&rsquo;s a cheap
way to try.  At QuizUp we monitor all our hosts though, as when running larger
instances the fee charged per host is trivial for us, so I highly recommend
that if cost is not an issue.</p>

                    </section>
                </article>
            </div>
        </div>


        <div class="twelve columns row li-pagination">
            <div class="six columns">
                <div class="li-pagination-previous">
                    
                        Later article<br />
                        <a href="http://steinn.org/post/apns-setup/"> Setting up APNS for iOS</a>
                    
                </div>
            </div>
            <div class="six columns" style="margin-left: 0; margin-right: 0">
                <div class="li-pagination-next">
                    
                        
                            Older article<br />
                            <a href="http://steinn.org/post/redis-workload-recorder/"> redis workload recorder</a>
                        
                    
                </div>
            </div>
        </div>

    </div>

<footer class="li-page-footer">
    <div class="container">
        <div class="row">
            <div class="twelve columns">
                <div class="li-page-footer-legal">
                    &copy; 2015. All rights reserved. 
                </div>
                <div class="li-page-footer-theme">
                    <span class=""><a href="https://github.com/steinnes/lakkris">lakkr√≠s</a> is a theme for <a href="http://hugo.spf13.com">hugo</a></span>
                </div>
            </div>
        </div>
    </div>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-66867767-1', 'auto');
  ga('send', 'pageview');
</script>
</footer>

    <script type="text/javascript">
    <!--
    function toggle(id) {
        var e = document.getElementById(id);
        e.style.display == 'block' ? e.style.display = 'none' : e.style.display = 'block';
    }
    
    </script>
    <script type="text/javascript">
    <!--
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', ""]);
        _gaq.push(['_trackPageview']);

        (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    -->
    </script>
    </body>
</html>

